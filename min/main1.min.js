var QuoteSpace=function(){var e=JSON.parse(localStorage.getItem("QuoteSpace.quotes"))||[],t=function(e,t,o){this.text=e,this.author=t,this.rating=o},o=function(o,u,n){e.push(new t(o,u,n)),console.log(e),localStorage.setItem("QuoteSpace.quotes",JSON.stringify(QuoteSpace.quotes))},u=function(e){$(e).empty();var t=$("#quote-block-template").html(),o=Handlebars.compile(t);$(".quotes-main").append(o(QuoteSpace))},n=function(e,t){return e.filter(function(e){return e.author===t})},a=function(e,t,o){for(var u=0;u<e.length;u++)if(e[u][t]===o)return u;return-1};return{quotes:e,addQuote:o,populateQuotes:u,filterQuotes:n,indexOfObject:a}}();void 0===QuoteSpace.quotes[0]&&(QuoteSpace.addQuote("The Edge... there is no honest way to explain it because the only people who really know where it is are the ones who have gone over.","Hunter S. Thompson",5),QuoteSpace.addQuote("America... just a nation of two hundred million used car salesmen with all the money we need to buy guns and no qualms about killing anybody else in the world who tries to make us uncomfortable.","Hunter S. Thompson",1),QuoteSpace.addQuote("In a closed society where everybody's guilty, the only crime is getting caught. In a world of thieves, the only final sin is stupidity.","Hunter S. Thompson",4),QuoteSpace.addQuote("For every moment of triumph, for every instance of beauty, many souls must be trampled.","Hunter S. Thompson",3),QuoteSpace.addQuote("Donâ€™t ask what the world needs. Ask what makes you come alive, and go do it. Because what the world needs is people who have come alive.","Howard Thurman",5)),$(document).on("ready",function(){QuoteSpace.populateQuotes(".quotes-main",QuoteSpace.quotes),$(document).on("click",".submit-button",function(){QuoteSpace.addQuote($(".quote-text-input").val(),$(".author-text-input").val(),null),console.log(QuoteSpace.quotes),QuoteSpace.populateQuotes(".quotes-main",QuoteSpace.quotes)}),$(document).on("click",".an-author",function(){QuoteSpace.populateQuotes(".quotes-main",QuoteSpace.filterQuotes(QuoteSpace.quotes,$(this).text())),$(".return-button").toggle()}),$(document).on("click",".return-button",function(){$(".return-button").toggle(),QuoteSpace.populateQuotes(".quotes-main",QuoteSpace.quotes)}),$(document).on("click",".delete-button",function(){$(this).closest(".quote-block").prepend("<div class = 'delete-popup'><button = class = 'confirm-button'>Confirm</button><button class = 'cancel-button'>cancel</button></div>")}),$(document).on("click",".confirm-button",function(){var e=this;QuoteSpace.quotes=_.reject(QuoteSpace.quotes,function(t){return t.text===$(e).closest(".quote-block").find(".a-quote").text()}),QuoteSpace.populateQuotes(".quotes-main",QuoteSpace.quotes),localStorage.setItem("QuoteSpace.quotes",JSON.stringify(QuoteSpace.quotes))}),$(document).on("click",".cancel-button",function(){$(this).closest(".delete-popup").remove()}),$(document).on("click",".rating-input input",function(){var e=$(this).attr("name"),t=$("input[name="+e+"]:checked").val(),o=$(this).closest(".quote-block").find(".a-quote").text(),u=QuoteSpace.indexOfObject(QuoteSpace.quotes,"text",o);QuoteSpace.quotes[u].rating=t,QuoteSpace.populateQuotes(".quotes-main",QuoteSpace.quotes),localStorage.setItem("QuoteSpace.quotes",JSON.stringify(QuoteSpace.quotes))}),$(document).on("click",".random-button",function(){$(".main-wrapper").prepend("<div class = 'random-popup'></div>"),QuoteSpace.populateQuotes(".random-popup",[QuoteSpace.quotes[Math.floor(Math.random()*(QuoteSpace.quotes.length-1))]]),$(".random-popup").append("<button class ='random-close-button'> close</button>")}),$(document).on("click",".random-close-button",function(){$(".random-popup").remove()})});